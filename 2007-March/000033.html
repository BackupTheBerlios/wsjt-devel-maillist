<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Wsjt-devel] Illegal instruction
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/wsjt-devel/2007-March/index.html" >
   <LINK REL="made" HREF="mailto:wsjt-devel%40lists.berlios.de?Subject=Re%3A%20%5BWsjt-devel%5D%20Illegal%20instruction&In-Reply-To=%3C45EA0A22.6000900%40superbug.co.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000032.html">
   <LINK REL="Next"  HREF="000034.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Wsjt-devel] Illegal instruction</H1>
    <B>James Courtier-Dutton</B> 
    <A HREF="mailto:wsjt-devel%40lists.berlios.de?Subject=Re%3A%20%5BWsjt-devel%5D%20Illegal%20instruction&In-Reply-To=%3C45EA0A22.6000900%40superbug.co.uk%3E"
       TITLE="[Wsjt-devel] Illegal instruction">James at superbug.co.uk
       </A><BR>
    <I>Sun Mar  4 00:52:02 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000032.html">[Wsjt-devel] wsjt now works again.
</A></li>
        <LI>Next message: <A HREF="000034.html">[Wsjt-devel] Illegal instruction
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33">[ date ]</a>
              <a href="thread.html#33">[ thread ]</a>
              <a href="subject.html#33">[ subject ]</a>
              <a href="author.html#33">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have a problem with the current WSJT.

WSJT Version 5.9.6 r365 , by K1JT
Revision date: 2007-03-02 21:43:37 +0000 (Fri, 02 Mar 2007)
Run date:   Sat Mar  3 23:48:20 2007 UTC
Illegal instruction

The code in question is:
(gdb) run wsjt.py
Starting program: /usr/bin/python wsjt.py
[Thread debugging using libthread_db enabled]
[New Thread -1211476288 (LWP 15989)]
[New Thread -1218385008 (LWP 15992)]
******************************************************************
WSJT Version 5.9.6 r365 , by K1JT
Revision date: 2007-03-02 21:43:37 +0000 (Fri, 02 Mar 2007)
Run date:   Sat Mar  3 23:49:58 2007 UTC

Program received signal SIGILL, Illegal instruction.
[Switching to Thread -1211476288 (LWP 15989)]
0xb31e1dcc in ftn_init_ () at ftn_init.F90:28
28        i=ptt(nport,pttport,0,iptt)                       !Clear the
PTT line
Current language:  auto; currently fortran
(gdb) bt
#0  0xb31e1dcc in ftn_init_ () at ftn_init.F90:28
#1  0xb31da469 in f2py_rout_Audio_ftn_init () from /u/wsjt/WSJT/Audio.so
#2  0xb31dd534 in fortran_call () from /u/wsjt/WSJT/Audio.so
#3  0xb7e34307 in PyObject_Call () from /usr/lib/libpython2.4.so.1.0
#4  0xb7e9d05a in PyEval_EvalFrame () from /usr/lib/libpython2.4.so.1.0
#5  0xb7ea08ba in PyEval_EvalCodeEx () from /usr/lib/libpython2.4.so.1.0
#6  0xb7ea0925 in PyEval_EvalCode () from /usr/lib/libpython2.4.so.1.0
#7  0xb7ec5767 in PyRun_FileExFlags () from /usr/lib/libpython2.4.so.1.0
#8  0xb7ec5976 in PyRun_SimpleFileExFlags () from
/usr/lib/libpython2.4.so.1.0
#9  0xb7ec5c4a in PyRun_AnyFileExFlags () from /usr/lib/libpython2.4.so.1.0
#10 0xb7ecbfdb in Py_Main () from /usr/lib/libpython2.4.so.1.0
#11 0x080485b2 in main ()
(gdb) disassemble
Dump of assembler code for function ftn_init_:
0xb31e1d78 &lt;ftn_init_+0&gt;:       push   %esi
0xb31e1d79 &lt;ftn_init_+1&gt;:       push   %ebx
0xb31e1d7a &lt;ftn_init_+2&gt;:       sub    $0x184,%esp
0xb31e1d80 &lt;ftn_init_+8&gt;:       call   0xb31d6ff5 &lt;__i686.get_pc_thunk.bx&gt;
0xb31e1d85 &lt;ftn_init_+13&gt;:      add    $0x70433,%ebx
0xb31e1d8b &lt;ftn_init_+19&gt;:      movl   $0xc,0x10(%esp)
0xb31e1d93 &lt;ftn_init_+27&gt;:      lea    0x174(%esp),%eax
0xb31e1d9a &lt;ftn_init_+34&gt;:      mov    %eax,0xc(%esp)
0xb31e1d9e &lt;ftn_init_+38&gt;:      lea    0xfffcdda4(%ebx),%eax
0xb31e1da4 &lt;ftn_init_+44&gt;:      mov    %eax,0x8(%esp)
0xb31e1da8 &lt;ftn_init_+48&gt;:      mov    0xffffff70(%ebx),%eax
0xb31e1dae &lt;ftn_init_+54&gt;:      lea    0x367f78(%eax),%eax
0xb31e1db4 &lt;ftn_init_+60&gt;:      mov    %eax,0x4(%esp)
0xb31e1db8 &lt;ftn_init_+64&gt;:      mov    0xffffff70(%ebx),%eax
0xb31e1dbe &lt;ftn_init_+70&gt;:      lea    0xc3a98(%eax),%eax
0xb31e1dc4 &lt;ftn_init_+76&gt;:      mov    %eax,(%esp)
0xb31e1dc7 &lt;ftn_init_+79&gt;:      call   0xb31d6a94 &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/wsjt-devel">ptt_ at plt</A>&gt;
0xb31e1dcc &lt;ftn_init_+84&gt;:      fisttpl 0x17c(%esp)
0xb31e1dd3 &lt;ftn_init_+91&gt;:      lea    0xfffcdda8(%ebx),%eax
0xb31e1dd9 &lt;ftn_init_+97&gt;:      mov    %eax,0xc(%esp)
0xb31e1ddd &lt;ftn_init_+101&gt;:     movl   $0x4,0x8(%esp)
0xb31e1de5 &lt;ftn_init_+109&gt;:     mov    0xffffff48(%ebx),%eax
0xb31e1deb &lt;ftn_init_+115&gt;:     mov    %eax,0x4(%esp)
0xb31e1def &lt;ftn_init_+119&gt;:     movl   $0x8,(%esp)
0xb31e1df6 &lt;ftn_init_+126&gt;:     call   0xb31d65e4
&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/wsjt-devel">_gfortran_copy_string at plt</A>&gt;
0xb31e1dfb &lt;ftn_init_+131&gt;:     movl   $0x50,0x17c(%esp)
0xb31e1e06 &lt;ftn_init_+142&gt;:     cmpl   $0x0,0x17c(%esp)
0xb31e1e0e &lt;ftn_init_+150&gt;:     jle    0xb31e1e4a &lt;ftn_init_+210&gt;
0xb31e1e10 &lt;ftn_init_+152&gt;:     mov    0x17c(%esp),%edx
0xb31e1e17 &lt;ftn_init_+159&gt;:     mov    0xffffff70(%ebx),%eax
0xb31e1e1d &lt;ftn_init_+165&gt;:     movzbl 0x367e7b(%edx,%eax,1),%edx
0xb31e1e25 &lt;ftn_init_+173&gt;:     mov    $0x20,%eax
0xb31e1e2a &lt;ftn_init_+178&gt;:     cmp    %al,%dl
0xb31e1e2c &lt;ftn_init_+180&gt;:     jne    0xb31e1e4a &lt;ftn_init_+210&gt;
0xb31e1e2e &lt;ftn_init_+182&gt;:     cmpl   $0x1,0x17c(%esp)
---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---q
Quit
(gdb)

The problem instruction is:
0xb31e1dcc &lt;ftn_init_+84&gt;:      fisttpl 0x17c(%esp)

This is a sse3 instruction. My cpu can only do:
flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge
mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe cid xtpr

I.e. sse, sse2 but not sse3.

Does anyone know how to stop wsjt producing sse3 code?

James

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000032.html">[Wsjt-devel] wsjt now works again.
</A></li>
	<LI>Next message: <A HREF="000034.html">[Wsjt-devel] Illegal instruction
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33">[ date ]</a>
              <a href="thread.html#33">[ thread ]</a>
              <a href="subject.html#33">[ subject ]</a>
              <a href="author.html#33">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/wsjt-devel">More information about the Wsjt-devel
mailing list</a><br>
</body></html>
