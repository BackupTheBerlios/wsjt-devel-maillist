<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Wsjt-devel] WSPR v2.0
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/wsjt-devel/2009-October/index.html" >
   <LINK REL="made" HREF="mailto:wsjt-devel%40lists.berlios.de?Subject=Re%3A%20%5BWsjt-devel%5D%20WSPR%20v2.0&In-Reply-To=%3C4AE98E12.9030607%40princeton.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000753.html">
   <LINK REL="Next"  HREF="000756.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Wsjt-devel] WSPR v2.0</H1>
    <B>Joe Taylor</B> 
    <A HREF="mailto:wsjt-devel%40lists.berlios.de?Subject=Re%3A%20%5BWsjt-devel%5D%20WSPR%20v2.0&In-Reply-To=%3C4AE98E12.9030607%40princeton.edu%3E"
       TITLE="[Wsjt-devel] WSPR v2.0">joe at Princeton.EDU
       </A><BR>
    <I>Thu Oct 29 13:44:02 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000753.html">[Wsjt-devel] WSPR v2.0
</A></li>
        <LI>Next message: <A HREF="000756.html">[Wsjt-devel] WSPR v2.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#754">[ date ]</a>
              <a href="thread.html#754">[ thread ]</a>
              <a href="subject.html#754">[ subject ]</a>
              <a href="author.html#754">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi John,

I don't regularly use nm.  Do I need to specify an option? 
Running

% nm libfftw3f.a

produces a long list of error messsages of the form

nm: lt25-conf.o: File format not recognized

As I understand it, the mangling of entry-point names -- 
adding an underscore, or perhaps two -- is controlled by the 
compilers and by the way they are invoked by f2py.  Maybe 
the way we have things set up now is sub-optimal, but (on my 
systems at least) it is self consistent.

	-- Joe

John Nelson wrote:
&gt;<i> Hi Joe,
</I>&gt;<i> 
</I>&gt;<i> Thanks for the clarification about post-fix underscores in four2a.f
</I>&gt;<i> 
</I>&gt;<i> I suspect the requirement for post-fix underscores in four2a.f is not  
</I>&gt;<i> a problem with the compilers but with the way the fftw3f library is  
</I>&gt;<i> constructed.
</I>&gt;<i> 
</I>&gt;<i> We know that when fortran calls a routine which is part of a C  
</I>&gt;<i> program, the C routine *must* have a post_fix underscore in the  
</I>&gt;<i> routine definition.
</I>&gt;<i> 
</I>&gt;<i> Eg.   audiodev.f90 calls     padevsub(...)   and  the entry point in  
</I>&gt;<i> padevsub.c is, of course,   int padevsub_(...)
</I>&gt;<i> and so with gmtime2_()  in gmtime2.c  called from getutc.f90;     
</I>&gt;<i> nhash_()  called from hash.f90  etc. etc. for all fortran calls to C  
</I>&gt;<i> routines with the single exception of four2a.f
</I>&gt;<i> 
</I>&gt;<i> So in four2a.f when  it executes:   call sfftw_execute_(plan(i))    
</I>&gt;<i> the corresponding routine in the fftw library must be defined as   
</I>&gt;<i> sfftw_execute_plan__  with *two* post_fixed underscores.
</I>&gt;<i> 
</I>&gt;<i> Big question is:   why does the construction of the library do this?
</I>&gt;<i> 
</I>&gt;<i> A favour:  could you list the contents of your version of  
</I>&gt;<i> libfftw3f.a  using the nm  command and tell me what you see?
</I>&gt;<i> 
</I>&gt;<i> Mine shows all the sfftw calls with a single post_fix underscore.   I  
</I>&gt;<i> bet yours shows two....
</I>&gt;<i> 
</I>&gt;<i> 0000009c T _sfftw_cleanup_
</I>&gt;<i> 00000094 T _sfftw_destroy_plan_
</I>&gt;<i> 00000078 T _sfftw_execute_
</I>&gt;<i> ....
</I>&gt;<i> 
</I>&gt;<i> Just curious.
</I>&gt;<i> 
</I>&gt;<i>       73,  John    G4KLA
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Wsjt-devel mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/wsjt-devel">Wsjt-devel at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/wsjt-devel">https://lists.berlios.de/mailman/listinfo/wsjt-devel</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000753.html">[Wsjt-devel] WSPR v2.0
</A></li>
	<LI>Next message: <A HREF="000756.html">[Wsjt-devel] WSPR v2.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#754">[ date ]</a>
              <a href="thread.html#754">[ thread ]</a>
              <a href="subject.html#754">[ subject ]</a>
              <a href="author.html#754">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/wsjt-devel">More information about the Wsjt-devel
mailing list</a><br>
</body></html>
