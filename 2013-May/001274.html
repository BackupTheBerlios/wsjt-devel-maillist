<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Wsjt-devel] Blocking calls to hamlib
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/wsjt-devel/2013-May/index.html" >
   <LINK REL="made" HREF="mailto:wsjt-devel%40lists.berlios.de?Subject=Re%3A%20%5BWsjt-devel%5D%20Blocking%20calls%20to%20hamlib&In-Reply-To=%3CCALNQy4_6%3DHeb3pzOdoQ4iXNvZZT4047mNaRfckqGkMg8MKFVkQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001273.html">
   <LINK REL="Next"  HREF="001275.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Wsjt-devel] Blocking calls to hamlib</H1>
    <B>Edson W. R. Pereira</B> 
    <A HREF="mailto:wsjt-devel%40lists.berlios.de?Subject=Re%3A%20%5BWsjt-devel%5D%20Blocking%20calls%20to%20hamlib&In-Reply-To=%3CCALNQy4_6%3DHeb3pzOdoQ4iXNvZZT4047mNaRfckqGkMg8MKFVkQ%40mail.gmail.com%3E"
       TITLE="[Wsjt-devel] Blocking calls to hamlib">ewpereira at gmail.com
       </A><BR>
    <I>Thu May  2 18:30:26 CEST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="001273.html">[Wsjt-devel] Blocking calls to hamlib
</A></li>
        <LI>Next message: <A HREF="001275.html">[Wsjt-devel] Blocking calls to hamlib
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1274">[ date ]</a>
              <a href="thread.html#1274">[ thread ]</a>
              <a href="subject.html#1274">[ subject ]</a>
              <a href="author.html#1274">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi John,

This is the result of the same test sequence as you did. I am using an
IC-746 (non pro version)

On Thu, May 2, 2013 at 12:29 PM, John Nogatch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/wsjt-devel">jnogatch at gmail.com</A>&gt; wrote:

&gt;<i> The behavior I am seeing, with linux and serial port connection to
</I>&gt;<i> Elecraft K3:
</I>&gt;<i>
</I>&gt;<i> 1. With K3 powered off, if I try to start wsjtx, it repeatedly prints
</I>&gt;<i> 3 timeout messages and then displays &quot;rig_init failed&quot; dialog box.
</I>&gt;<i> wsjtx will not answer any other event except the &quot;OK&quot; button on that
</I>&gt;<i> dialog. It is necessary to kill the process to exit.
</I>&gt;<i>
</I>&gt;<i>
</I>WSJT-X come up ok with the radio powered off. The GUI is responsive. Freq
display is red indicating 000..


&gt;<i> 2. If wsjtx is started, and then the K3 is powered off, there is no
</I>&gt;<i> indication that contact is lost. Changing bands within wsjtx does not
</I>&gt;<i> yield any error message.
</I>&gt;<i>
</I>
No message box when the IC-746 is powered off, but the display goes red. If
I try to change bands, I get a msg box with the msg: &quot;Set rig freq failed:
-5&quot;.


&gt;<i>
</I>&gt;<i> 3. If the K3 is then powered on, changing bands within wsjtx does
</I>&gt;<i> resume working.
</I>&gt;<i>
</I>&gt;<i>
</I>Clicking on ok on the previous msg box and powering up the radio, the GUI
resumes normal operations.


&gt;<i> 4. Using rigctl, instead of wsjtx, I do see error message, if a
</I>&gt;<i> command is attempted after K3 is powered off:
</I>&gt;<i> rigctl -m 229 -r /dev/ttyS0 -s 4800 -C rts_state=OFF -C dtr_state=OFF
</I>&gt;<i> -C data_bits=8 -C stop_bits=2
</I>&gt;<i>
</I>&gt;<i> Rig command: f
</I>&gt;<i> Frequency: 14078000
</I>&gt;<i>
</I>&gt;<i> Rig command: f
</I>&gt;<i> Frequency: 14078180
</I>&gt;<i>
</I>&gt;<i> Rig command: f
</I>&gt;<i> get_freq: error = Communication timed out
</I>&gt;<i>
</I>&gt;<i>
</I>(radio is powered off)
rigctl -m 323 -r /dev/ttyS0 -s 19200 -C rts_state=OFF -C dtr_state=OFF

Rig command: f
get_freq: error = Communication timed out

(radio is powered on)
Rig command: f
Frequency: 21078000



&gt;<i>
</I>&gt;<i> In the hamlib documentation
</I>&gt;<i> <A HREF="http://hamlib.sourceforge.net/manuals/1.2.15/rig_8h_source.html">http://hamlib.sourceforge.net/manuals/1.2.15/rig_8h_source.html</A> I see
</I>&gt;<i> that &quot;timeout&quot; is a field in both the struct rig_caps, and also in
</I>&gt;<i> hamlib_port_t. I am unsure why they are separate values. The doxygen
</I>&gt;<i> generated documentation is rather lacking on the intent of the fields.
</I>&gt;<i>
</I>&gt;<i>
</I>This is indeed strage. I will try to see which one of the timeouts
setConf() works on.

I find the hamlib code very difficult to follow. :-(

73,

-- Edson P2SDR
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/wsjt-devel/attachments/20130502/bac85721/attachment.html">https://lists.berlios.de/pipermail/wsjt-devel/attachments/20130502/bac85721/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001273.html">[Wsjt-devel] Blocking calls to hamlib
</A></li>
	<LI>Next message: <A HREF="001275.html">[Wsjt-devel] Blocking calls to hamlib
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1274">[ date ]</a>
              <a href="thread.html#1274">[ thread ]</a>
              <a href="subject.html#1274">[ subject ]</a>
              <a href="author.html#1274">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/wsjt-devel">More information about the Wsjt-devel
mailing list</a><br>
</body></html>
