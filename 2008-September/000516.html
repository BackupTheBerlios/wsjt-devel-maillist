<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Wsjt-devel] WSPR problem using Ubuntu 8.04
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/wsjt-devel/2008-September/index.html" >
   <LINK REL="made" HREF="mailto:wsjt-devel%40lists.berlios.de?Subject=Re%3A%20%5BWsjt-devel%5D%20WSPR%20problem%20using%20Ubuntu%208.04&In-Reply-To=%3C20080911234752.GA74998%40night.db.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000515.html">
   <LINK REL="Next"  HREF="000518.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Wsjt-devel] WSPR problem using Ubuntu 8.04</H1>
    <B>Diane Bruce</B> 
    <A HREF="mailto:wsjt-devel%40lists.berlios.de?Subject=Re%3A%20%5BWsjt-devel%5D%20WSPR%20problem%20using%20Ubuntu%208.04&In-Reply-To=%3C20080911234752.GA74998%40night.db.net%3E"
       TITLE="[Wsjt-devel] WSPR problem using Ubuntu 8.04">db at db.net
       </A><BR>
    <I>Fri Sep 12 01:47:52 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000515.html">[Wsjt-devel] WSPR problem using Ubuntu 8.04
</A></li>
        <LI>Next message: <A HREF="000518.html">[Wsjt-devel] WSJT and COM ports beyond COM9
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#516">[ date ]</a>
              <a href="thread.html#516">[ thread ]</a>
              <a href="subject.html#516">[ subject ]</a>
              <a href="author.html#516">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On Thu, Sep 11, 2008 at 11:33:17PM +0200, Andreas Weller wrote:
&gt;<i> &gt; I bet it is the buggy py-numpy Ubuntu and Debian imported.
</I>&gt;<i> Hi Diane and John.
</I>&gt;<i> It seems you are correct with this. I installed numpy 1.1.1 from source
</I>&gt;<i> but now there's a new problem:
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/wsjt-devel">andreas at notebook</A>:~/wspr/wsjt/branches/wspr$ python wspr.py
</I>&gt;<i> &gt; ******************************************************************
</I>&gt;<i> &gt; WSPR Version 1.0_r987 , by K1JT
</I>&gt;<i> &gt; Run date:   Thu Sep 11 21:28:05 2008 UTC
</I>&gt;<i> &gt; Segmentation fault
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/wsjt-devel">andreas at notebook</A>:~/wspr/wsjt/branches/wspr$
</I>&gt;<i> 
</I>&gt;<i> Running numpy selftest results in:
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/wsjt-devel">andreas at notebook</A>:~/wspr/wsjt/branches/wspr$ python -c 'import numpy;
</I>&gt;<i> numpy.test()'
</I>&gt;<i> &gt; Numpy is installed in /usr/lib/python2.5/site-packages/numpy
</I>&gt;<i> &gt; Numpy version 1.1.1
</I>&gt;<i> &gt; Python version 2.5.2 (r252:60911, Jul 31 2008, 17:28:52) [GCC 4.2.3
</I>&gt;<i> (Ubuntu 4.2.3-2ubuntu7)]
</I>&gt;<i> &gt;   Found 12/12 tests for numpy.core.tests.test_records
</I>&gt;<i> &gt;   Found 3/3 tests for numpy.core.tests.test_errstate
</I>&gt;<i> &gt;   Found 16/16 tests for numpy.core.tests.test_umath
</I>&gt;<i> &gt;   Found 18/18 tests for numpy.core.tests.test_defmatrix
</I>&gt;<i> &gt;   Found 36/36 tests for numpy.core.tests.test_numerictypes
</I>&gt;<i> &gt;   Found 72/72 tests for numpy.core.tests.test_numeric
</I>&gt;<i> &gt;   Found 2/2 tests for numpy.core.tests.test_ufunc
</I>&gt;<i> &gt;   Found 3/3 tests for numpy.core.tests.test_memmap
</I>&gt;<i> &gt;   Found 7/7 tests for numpy.core.tests.test_scalarmath
</I>&gt;<i> &gt;   Found 36/36 tests for numpy.core.tests.test_ma
</I>&gt;<i> &gt;   Found 63/63 tests for numpy.core.tests.test_unicode
</I>&gt;<i> &gt;   Found 290/290 tests for numpy.core.tests.test_multiarray
</I>&gt;<i> &gt;   Found 145/145 tests for numpy.core.tests.test_regression
</I>&gt;<i> &gt;   Found 4/4 tests for numpy.distutils.tests.test_fcompiler_gnu
</I>&gt;<i> &gt;   Found 5/5 tests for numpy.distutils.tests.test_misc_util
</I>&gt;<i> &gt;   Found 3/3 tests for numpy.fft.tests.test_helper
</I>&gt;<i> &gt;   Found 2/2 tests for numpy.fft.tests.test_fftpack
</I>&gt;<i> &gt;   Found 25/25 tests for numpy.lib.tests.test__datasource
</I>&gt;<i> &gt;   Found 1/1 tests for numpy.lib.tests.test_machar
</I>&gt;<i> &gt;   Found 10/10 tests for numpy.lib.tests.test_arraysetops
</I>&gt;<i> &gt;   Found 1/1 tests for numpy.lib.tests.test_ufunclike
</I>&gt;<i> &gt;   Found 1/1 tests for numpy.lib.tests.test_financial
</I>&gt;<i> &gt;   Found 55/55 tests for numpy.lib.tests.test_function_base
</I>&gt;<i> &gt;   Found 15/15 tests for numpy.lib.tests.test_io
</I>&gt;<i> &gt;   Found 43/43 tests for numpy.lib.tests.test_type_check
</I>&gt;<i> &gt;   Found 5/5 tests for numpy.lib.tests.test_getlimits
</I>&gt;<i> &gt;   Found 6/6 tests for numpy.lib.tests.test_index_tricks
</I>&gt;<i> &gt;   Found 15/15 tests for numpy.lib.tests.test_twodim_base
</I>&gt;<i> &gt;   Found 4/4 tests for numpy.lib.tests.test_polynomial
</I>&gt;<i> &gt;   Found 1/1 tests for numpy.lib.tests.test_regression
</I>&gt;<i> &gt;   Found 49/49 tests for numpy.lib.tests.test_shape_base
</I>&gt;<i> &gt;   Found 89/89 tests for numpy.linalg.tests.test_linalg
</I>&gt;<i> &gt;   Found 3/3 tests for numpy.linalg.tests.test_regression
</I>&gt;<i> &gt;   Found 36/36 tests for numpy.ma.tests.test_old_ma
</I>&gt;<i> &gt;   Found 19/19 tests for numpy.ma.tests.test_mrecords
</I>&gt;<i> &gt;   Found 4/4 tests for numpy.ma.tests.test_subclassing
</I>&gt;<i> &gt;   Found 96/96 tests for numpy.ma.tests.test_core
</I>&gt;<i> &gt;   Found 15/15 tests for numpy.ma.tests.test_extras
</I>&gt;<i> &gt;   Found 1/1 tests for numpy.oldnumeric.tests.test_oldnumeric
</I>&gt;<i> &gt;   Found 7/7 tests for numpy.tests.test_random
</I>&gt;<i> &gt;   Found 16/16 tests for numpy.testing.tests.test_utils
</I>&gt;<i> &gt;   Found 6/6 tests for numpy.tests.test_ctypeslib
</I>&gt;<i> &gt;
</I>&gt;<i> ......................................................................................................................................................................................................................./usr/lib/python2.5/site-packages/numpy/core/ma.py:609:
</I>&gt;<i> UserWarning: Cannot automatically convert masked array to numeric
</I>&gt;<i> because data
</I>&gt;<i> &gt;     is masked in one or more locations.
</I>&gt;<i> &gt;   warnings.warn(&quot;Cannot automatically convert masked array to &quot;\
</I>&gt;<i> &gt;
</I>&gt;<i> F.............................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................
</I>&gt;<i> 
</I>&gt;<i> ...................................................................................................................................
</I>&gt;<i> &gt; ======================================================================
</I>&gt;<i> &gt; FAIL: check_testUfuncRegression (numpy.core.tests.test_ma.TestUfuncs)
</I>&gt;<i> &gt; ----------------------------------------------------------------------
</I>&gt;<i> &gt; Traceback (most recent call last):
</I>&gt;<i> &gt;   File &quot;/usr/lib/python2.5/site-packages/numpy/core/tests/test_ma.py&quot;,
</I>&gt;<i> line 692, in check_testUfuncRegression
</I>&gt;<i> &gt;     self.failUnless(eqmask(ur.mask, mr.mask))
</I>&gt;<i> &gt; AssertionError
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; ----------------------------------------------------------------------
</I>&gt;<i> &gt; Ran 1336 tests in 3.199s
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; FAILED (failures=1)
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/wsjt-devel">andreas at notebook</A>:~/wspr/wsjt/branches/wspr$
</I>&gt;<i> 
</I>

% python -c 'import numpy; numpy.test()'
Numpy is installed in /usr/local/lib/python2.5/site-packages/numpy
Numpy version 1.1.1
Python version 2.5.2 (r252:60911, Sep  8 2008, 09:16:52) [GCC 4.2.1 20070719  [FreeBSD]]
  Found 2/2 tests for numpy.core.tests.test_ufunc
  Found 145/145 tests for numpy.core.tests.test_regression
  Found 63/63 tests for numpy.core.tests.test_unicode
  Found 7/7 tests for numpy.core.tests.test_scalarmath
  Found 3/3 tests for numpy.core.tests.test_errstate
  Found 16/16 tests for numpy.core.tests.test_umath
  Found 12/12 tests for numpy.core.tests.test_records
  Found 72/72 tests for numpy.core.tests.test_numeric
  Found 18/18 tests for numpy.core.tests.test_defmatrix
  Found 36/36 tests for numpy.core.tests.test_numerictypes
  Found 290/290 tests for numpy.core.tests.test_multiarray
  Found 3/3 tests for numpy.core.tests.test_memmap
  Found 4/4 tests for numpy.distutils.tests.test_fcompiler_gnu
  Found 5/5 tests for numpy.distutils.tests.test_misc_util
  Found 2/2 tests for numpy.fft.tests.test_fftpack
  Found 3/3 tests for numpy.fft.tests.test_helper
  Found 15/15 tests for numpy.lib.tests.test_twodim_base
  Found 1/1 tests for numpy.lib.tests.test_regression
  Found 4/4 tests for numpy.lib.tests.test_polynomial
  Found 43/43 tests for numpy.lib.tests.test_type_check
  Found 1/1 tests for numpy.lib.tests.test_financial
  Found 1/1 tests for numpy.lib.tests.test_machar
  Found 55/55 tests for numpy.lib.tests.test_function_base
  Found 6/6 tests for numpy.lib.tests.test_index_tricks
  Found 15/15 tests for numpy.lib.tests.test_io
  Found 10/10 tests for numpy.lib.tests.test_arraysetops
  Found 1/1 tests for numpy.lib.tests.test_ufunclike
  Found 5/5 tests for numpy.lib.tests.test_getlimits
  Found 25/25 tests for numpy.lib.tests.test__datasource
  Found 49/49 tests for numpy.lib.tests.test_shape_base
  Found 3/3 tests for numpy.linalg.tests.test_regression
  Found 89/89 tests for numpy.linalg.tests.test_linalg
  Found 36/36 tests for numpy.ma.tests.test_old_ma
  Found 96/96 tests for numpy.ma.tests.test_core
  Found 15/15 tests for numpy.ma.tests.test_extras
  Found 19/19 tests for numpy.ma.tests.test_mrecords
  Found 4/4 tests for numpy.ma.tests.test_subclassing
  Found 1/1 tests for numpy.oldnumeric.tests.test_oldnumeric
  Found 7/7 tests for numpy.tests.test_random
  Found 16/16 tests for numpy.testing.tests.test_utils
  Found 6/6 tests for numpy.tests.test_ctypeslib
....................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................
----------------------------------------------------------------------
Ran 1300 tests in 14.924s

OK
&gt;<i> Any idea?
</I>
Switch to FreeBSD :-) ;-) (<A HREF="http://www.pcbsd.org">http://www.pcbsd.org</A>)

Seriously, try backing off to numpy 1.0.4 for now, we know wsjt
will work with that and that should still be available.

We ended up not importing 1.1 into FreeBSD because of the original fault
you reported btw and went directly to 1.1.1
FWIW I debugged the numpy 'c' code, in 1.1 

The bug was fixed in Changeset 5241.

--- numpy/core/src/arrayobject.c.orig   2008-07-10 07:59:07.000000000 -0400
+++ numpy/core/src/arrayobject.c        2008-07-10 08:15:57.000000000 -0400
@@ -8801,7 +8801,7 @@
         else if (newtype-&gt;type_num == PyArray_OBJECT) {
             isobject = 1;
         }
-        if (!PyString_Check(op) &amp;&amp; PySequence_Check(op)) {
+        if (PySequence_Check(op)) { /* Fixed in Changeset 5241 */
             PyObject *thiserr = NULL;
 


Oh! I just noticed something

........................................................./usr/lib/python2.5/site
-packages/numpy/core/ma.py:609:


% ls /usr/local/lib/python2.5/site-packages/numpy/oldnumeric/ma.py
/usr/local/lib/python2.5/site-packages/numpy/oldnumeric/ma.py

I bet you forgot to rm -rf your old numpy package and it picked up an
old ma.py instead of the new one in 1.1.1

&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Regards,
</I>&gt;<i>   Andreas, DF1PAW
</I>&gt;<i> 
</I>
- 73 Diane VA3DB
-- 
- <A HREF="https://lists.berlios.de/mailman/listinfo/wsjt-devel">db at FreeBSD.org</A> <A HREF="https://lists.berlios.de/mailman/listinfo/wsjt-devel">db at db.net</A> <A HREF="http://www.db.net/~db">http://www.db.net/~db</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000515.html">[Wsjt-devel] WSPR problem using Ubuntu 8.04
</A></li>
	<LI>Next message: <A HREF="000518.html">[Wsjt-devel] WSJT and COM ports beyond COM9
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#516">[ date ]</a>
              <a href="thread.html#516">[ thread ]</a>
              <a href="subject.html#516">[ subject ]</a>
              <a href="author.html#516">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/wsjt-devel">More information about the Wsjt-devel
mailing list</a><br>
</body></html>
