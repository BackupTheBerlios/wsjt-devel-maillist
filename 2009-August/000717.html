<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Wsjt-devel] WSJT .deb file
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/wsjt-devel/2009-August/index.html" >
   <LINK REL="made" HREF="mailto:wsjt-devel%40lists.berlios.de?Subject=Re%3A%20%5BWsjt-devel%5D%20WSJT%20.deb%20file&In-Reply-To=%3C4A76FE85.5030609%40princeton.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000716.html">
   <LINK REL="Next"  HREF="000718.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Wsjt-devel] WSJT .deb file</H1>
    <B>Joe Taylor</B> 
    <A HREF="mailto:wsjt-devel%40lists.berlios.de?Subject=Re%3A%20%5BWsjt-devel%5D%20WSJT%20.deb%20file&In-Reply-To=%3C4A76FE85.5030609%40princeton.edu%3E"
       TITLE="[Wsjt-devel] WSJT .deb file">joe at Princeton.EDU
       </A><BR>
    <I>Mon Aug  3 17:13:09 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000716.html">[Wsjt-devel] [Fwd: Re:  WSJT .deb file]
</A></li>
        <LI>Next message: <A HREF="000718.html">[Wsjt-devel] wsjt r1313
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#717">[ date ]</a>
              <a href="thread.html#717">[ thread ]</a>
              <a href="subject.html#717">[ subject ]</a>
              <a href="author.html#717">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi James and all,

James Courtier-Dutton wrote:
&gt;&gt;<i> For interest: the file Audio.so included in 
</I>&gt;&gt;<i> wsjt_7.04r1311_i386.deb was compiled using Intel Fortran 
</I>&gt;&gt;<i> v11.0, which is freely available for non-commercial use on 
</I>&gt;&gt;<i> Linux.
</I>
&gt;<i> I would say that this is fairly conclusive.
</I>&gt;<i> Intel Fortran v11.0 works.
</I>&gt;<i> g95 works
</I>&gt;<i> gfortran fails.
</I>
If not fully conclusive, at least we are making progress.

&gt;<i> f2py is used for all options, so I conclude:
</I>&gt;<i> Either gfortran has bugs that we should highlight upstream to get fixed.
</I>&gt;<i> f2py had bugs that are only apparent when used with gfortran.
</I>&gt;<i> 
</I>&gt;<i> From my own analysis, I have discovered that the code generated by
</I>&gt;<i> gfortran is very different.
</I>&gt;<i> I.e. gfortran to compile astro0.f90 into astro0.o
</I>&gt;<i> produces a very different result from
</I>&gt;<i> f2py to compile astro0.f90 into Audio.so
</I>&gt;<i> 
</I>&gt;<i> The differences are not present when doing the same, but with g95.
</I>&gt;<i> As all the compilers take different options, my guess is that f2py is
</I>&gt;<i> using the wrong options when used with gfortran.
</I>
Well, you can see the compiler options being used in the 
output from the 'make' command.  I think it's not as simple 
as this.

&gt;<i> Is there any way to get f2py to create .o files instead of .so files?
</I>&gt;<i> We could then narrow down the problem considerably. I.e I would like to
</I>&gt;<i> see .o files created during the compile process from .f90 to Audio.so
</I>
I believe the answer is no.

 From the F2PY Users Guide and Reference Manual, 
<A HREF="http://cens.ioc.ee/projects/f2py2e/usersguide/index.html">http://cens.ioc.ee/projects/f2py2e/usersguide/index.html</A> , 
the command to build an extension module has the form:

f2py -c &lt;options&gt; &lt;fortran files&gt;       \
   [[ only: &lt;fortran functions&gt;  : ]     \
    [ skip: &lt;fortran functions&gt;  : ]]... \
   [ &lt;fortran/c source files&gt; ] [ &lt;.o, .a, .so files&gt; ]

The first group of &lt;fortran files&gt;, or the
&lt;fortran functions&gt; listed in the optional phrase
[ only: &lt;fortran functions&gt; : ] ,
must include all functions you want &quot;wrapped&quot; and made 
callable from Python.  These functions cannot be compiled in 
a separate step.  Any other Fortran (or C) functions may be 
compiled separately and furnished to f2py as .o files. 
(Thus, you could examine the compiled code for them, 
independently of the resulting Audio.so file.)

On another matter: some time ago, in response to a question 
of yours, I asked:

&gt;&gt;<i> Is is normal for over 1k of data to be passed on the stack when making
</I>&gt;&gt;<i> function calls?
</I>&gt;<i> 
</I>&gt;<i> Can you give me an example of where this happens?  It sounds
</I>&gt;<i> unusual (and probably undesirable), offhand.
</I>
Are you still concerned about this?  Please give an example 
of what was bothering you.

	-- Joe, K1JT


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000716.html">[Wsjt-devel] [Fwd: Re:  WSJT .deb file]
</A></li>
	<LI>Next message: <A HREF="000718.html">[Wsjt-devel] wsjt r1313
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#717">[ date ]</a>
              <a href="thread.html#717">[ thread ]</a>
              <a href="subject.html#717">[ subject ]</a>
              <a href="author.html#717">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/wsjt-devel">More information about the Wsjt-devel
mailing list</a><br>
</body></html>
